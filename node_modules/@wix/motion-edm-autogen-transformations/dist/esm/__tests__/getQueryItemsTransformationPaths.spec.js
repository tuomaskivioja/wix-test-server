import { aString } from '@wix/motion-runtime-test-context';
import { times } from 'lodash';
import { getQueryItemsTransformationPaths } from '..';
describe('getQueryItemsTransformationPaths', () => {
    test.each `
    transformation                | description
    ${{}}                         | ${'empty'}
    ${{ [aString()]: aString() }} | ${'no item transformation'}
    ${'$'}                        | ${'a string'}
  `('returns an empty object when transformation is $description', ({ transformation }) => {
        expect(getQueryItemsTransformationPaths(transformation)).toStrictEqual({});
    });
    test('collects top-level simple transformation keys', () => {
        const key = aString();
        const jsonPath = '$.a.b.c';
        const transformation = {
            items: {
                '@path': '$',
                '@itemTransformation': {
                    [key]: jsonPath,
                },
            },
        };
        expect(getQueryItemsTransformationPaths(transformation)).toStrictEqual({
            [key]: 'a.b.c',
        });
    });
    test('collects nested simple transformation keys', () => {
        const [key1, key2, key3] = times(3, () => aString());
        const jsonPath = '$.a.a.a';
        const expected = [key1, key2, key3].join('.');
        const transformation = {
            items: {
                '@path': '$',
                '@itemTransformation': {
                    [key1]: {
                        [key2]: {
                            [key3]: jsonPath,
                        },
                    },
                },
            },
        };
        expect(getQueryItemsTransformationPaths(transformation)).toStrictEqual({
            [expected]: 'a.a.a',
        });
    });
});
//# sourceMappingURL=getQueryItemsTransformationPaths.spec.js.map