{"version":3,"names":["_motionRuntimeTestContext","require","_lodash","_","describe","valueToKeep","aString","propertyToRemove1","propertyToRemove2","propertyToKeep1","propertyToKeep2","times","test","result","omitUndefinedValues","undefined","expect","toStrictEqual","each","aNumber","aBoolean","value"],"sources":["../../../../src/__tests__/transformations/omitUndefinedValues.spec.ts"],"sourcesContent":["import { aBoolean, aNumber, aString } from '@wix/motion-runtime-test-context';\nimport { times } from 'lodash';\n\nimport { omitUndefinedValues } from '../..';\n\ndescribe('omitUndefinedValues', () => {\n  const valueToKeep = aString();\n  const [\n    propertyToRemove1,\n    propertyToRemove2,\n    propertyToKeep1,\n    propertyToKeep2,\n  ] = times(4, () => aString());\n\n  test('removes keys with undefined values', () => {\n    const result = omitUndefinedValues({\n      [propertyToRemove1]: undefined,\n      [propertyToKeep1]: valueToKeep,\n    });\n\n    expect(result).toStrictEqual({ [propertyToKeep1]: valueToKeep });\n  });\n\n  test('removes objects with all undefined keys', () => {\n    const result = omitUndefinedValues({\n      [propertyToRemove1]: {\n        [propertyToRemove1]: undefined,\n        [propertyToRemove2]: undefined,\n      },\n      [propertyToKeep1]: valueToKeep,\n    });\n\n    expect(result).toStrictEqual({ [propertyToKeep1]: valueToKeep });\n  });\n\n  test('removes nested objects recursively', () => {\n    expect(\n      omitUndefinedValues({\n        [propertyToKeep1]: {\n          [propertyToRemove1]: {\n            [propertyToRemove1]: { [propertyToRemove1]: undefined },\n            [propertyToRemove2]: undefined,\n          },\n          [propertyToKeep1]: valueToKeep,\n        },\n      }),\n    ).toStrictEqual({ [propertyToKeep1]: { [propertyToKeep1]: valueToKeep } });\n  });\n\n  test('does not remove empty object with no keys', () => {\n    expect(\n      omitUndefinedValues({\n        [propertyToKeep1]: {\n          [propertyToKeep1]: {\n            [propertyToRemove1]: { [propertyToRemove1]: undefined },\n            [propertyToKeep1]: {},\n          },\n          [propertyToKeep2]: valueToKeep,\n        },\n      }),\n    ).toStrictEqual({\n      [propertyToKeep1]: {\n        [propertyToKeep1]: {\n          [propertyToKeep1]: {},\n        },\n        [propertyToKeep2]: valueToKeep,\n      },\n    });\n  });\n\n  test.each`\n    value         | description\n    ${null}       | ${'null'}\n    ${aNumber()}  | ${'a number'}\n    ${aBoolean()} | ${'a boolean'}\n    ${[]}         | ${'an empty array'}\n  `('does not remove $description', ({ value }) => {\n    expect(\n      omitUndefinedValues({\n        [propertyToKeep1]: {\n          [propertyToKeep1]: {\n            [propertyToRemove1]: { [propertyToRemove1]: undefined },\n            [propertyToKeep1]: value,\n          },\n        },\n      }),\n    ).toStrictEqual({\n      [propertyToKeep1]: {\n        [propertyToKeep1]: {\n          [propertyToKeep1]: value,\n        },\n      },\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}