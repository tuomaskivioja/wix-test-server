{"version":3,"names":["_motionRuntimeTestContext","require","_dedentJs","_interopRequireDefault","_httpStatusCodes","_lodash","_constants","_","describe","description","aString","argumentNames","times","stableArgumentNames","message","httpStatus","aRandomItemFrom","expectedErrorCodes","requestId","aRequestId","test","each","undefined","anObject","details","ambassadorHTTPError","response","expect","transformError","toMatchObject","constructor","Error","code","metadata","errorType","ErrorType","System","httpStatusCode","runtimeError","stack","transformation","a","b","c","d","errorCode","aNumber","validationError","fieldViolations","field","expectedMessage","dedent","User","fieldPath","anotherDescription","secret","name","value","fieldPathPrefix","set","plan","someField","aRandomApplicationErrorHttpStatusCode","key1","key2","value1","value2","data","applicationError","statusText","getReasonPhrase","expectedCode","split","map","upperCase","join"],"sources":["../../../../../src/__tests__/transformations/errors/transformError.spec.ts"],"sourcesContent":["import {\n  anObject,\n  aNumber,\n  aRandomItemFrom,\n  aRequestId,\n  aString,\n} from '@wix/motion-runtime-test-context';\nimport dedent from 'dedent-js';\nimport { getReasonPhrase } from 'http-status-codes';\nimport { set, times, upperCase } from 'lodash';\nimport { ErrorType } from '../../../lib/constants';\n\nimport { transformError } from '../../..';\n\ndescribe('transformError', () => {\n  const description = aString();\n  const argumentNames = times(3, () => aString());\n  const stableArgumentNames = [`zzz${aString()}`, `yyy${aString()}`];\n  const message = aString();\n\n  describe('system errors', () => {\n    describe('server errors', () => {\n      const httpStatus = aRandomItemFrom([500, 503]);\n      const expectedErrorCodes = {\n        500: 'INTERNAL_SERVER_ERROR',\n        503: 'SERVICE_UNAVAILABLE',\n      };\n      const requestId = aRequestId();\n\n      /* eslint-disable max-len */\n      test.each`\n        details       | description\n        ${undefined}  | ${'does not exist'}\n        ${anObject()} | ${\"an object without 'validationError', 'applicationError', and a status code exists on the request\"}\n      `(\n        /* eslint-enable max-len */\n        'transforms the response object message property to a JS error when the details property $description',\n        ({ details }) => {\n          const ambassadorHTTPError = {\n            httpStatus,\n            response: { details, message },\n            requestId,\n          };\n\n          expect(transformError(ambassadorHTTPError)).toMatchObject({\n            constructor: Error,\n            message: `System error occurred, request-id: ${requestId}`,\n            requestId,\n            code: expectedErrorCodes[httpStatus],\n            metadata: { errorType: ErrorType.System, httpStatusCode: httpStatus },\n          });\n        },\n      );\n    });\n\n    describe('network errors (request-id does not exist, httpStatus is -1', () => {\n      test('omits the request-id from the message', () => {\n        // Based on this: https://github.com/wix-private/ambassador/blob/master/src/runtime/http.ts#L253\n        const ambassadorHTTPError = { httpStatus: -1 };\n\n        expect(transformError(ambassadorHTTPError)).toMatchObject({\n          constructor: Error,\n          message: 'System error occurred',\n          code: 'UNKNOWN',\n          metadata: { errorType: ErrorType.System },\n        });\n      });\n    });\n\n    describe('runtime errors', () => {\n      test('bubble up the runtime error', () => {\n        const ambassadorHTTPError = {\n          runtimeError: {\n            stack: 'TypeError: val.toISOString is not a function',\n            message: 'TypeError: val.toISOString is not a function',\n          },\n        };\n\n        expect(transformError(ambassadorHTTPError)).toMatchObject({\n          constructor: Error,\n          message: 'System error occurred',\n          code: 'UNKNOWN',\n          runtimeError: ambassadorHTTPError.runtimeError,\n          metadata: { errorType: ErrorType.System },\n        });\n      });\n    });\n  });\n\n  describe('validation errors', () => {\n\n    test('strip field name for invalid input from the transformed error', () => {\n      const transformation = { a: { b: { c: '$[1]', d: '$[0]' } } };\n\n      const ambassadorHTTPError = {\n        httpStatus: 400,\n        response: {\n          message,\n          errorCode: aNumber(),\n          details: {\n            validationError: {\n              fieldViolations: [\n                { field: 'a.b.d', description },\n              ],\n            },\n          },\n        },\n      };\n\n      const expectedMessage = dedent`\n        message: 'INVALID_ARGUMENT: ${description}'\n        details:\n          validationError:\n            fieldViolations:\n              - description: ${description}`;\n\n      expect(\n        transformError(ambassadorHTTPError, transformation, undefined)\n      ).toMatchObject({\n        constructor: Error,\n        message: expectedMessage,\n        details: {\n          validationError: {\n            fieldViolations: [{ description }],\n          },\n        },\n        metadata: { errorType: ErrorType.User, httpStatusCode: ambassadorHTTPError.httpStatus },\n      });\n    });\n    test('transforms response.details.validationError.fieldViolations property to a JS error message', () => {\n      const transformation = { a: { b: { c: '$[1]', '*': '$[0]' } } };\n\n      const fieldPath = 'a.b.c';\n      const ambassadorHTTPError = {\n        httpStatus: 400,\n        response: {\n          message,\n          errorCode: aNumber(),\n          details: {\n            validationError: {\n              fieldViolations: [{ field: fieldPath, description }],\n            },\n          },\n        },\n      };\n\n      const expectedMessage = dedent`\n        message: 'INVALID_ARGUMENT: \"${argumentNames[1]}\" ${description}'\n        details:\n          validationError:\n            fieldViolations:\n              - field: ${argumentNames[1]}\n                description: ${description}`;\n\n      expect(\n        transformError(ambassadorHTTPError, transformation, argumentNames),\n      ).toMatchObject({\n        constructor: Error,\n        message: expectedMessage,\n        details: {\n          validationError: {\n            fieldViolations: [{ field: argumentNames[1], description }],\n          },\n        },\n        metadata: { errorType: ErrorType.User, httpStatusCode: ambassadorHTTPError.httpStatus },\n      });\n    });\n\n    test('handles multiple field violations, sorted by transformed field name', () => {\n      const transformation = { a: { b: { c: '$[1]', d: '$[0]' } } };\n      const anotherDescription = aString();\n\n      const ambassadorHTTPError = {\n        httpStatus: 400,\n        response: {\n          message,\n          errorCode: aNumber(),\n          details: {\n            validationError: {\n              fieldViolations: [\n                { field: 'a.b.d', description },\n                { field: 'a.b.c', description: anotherDescription },\n              ],\n            },\n          },\n        },\n      };\n\n      /* eslint-disable max-len */\n      const expectedMessage = dedent`\n        message: 'INVALID_ARGUMENT: \"${stableArgumentNames[1]}\" ${anotherDescription}, \"${stableArgumentNames[0]}\" ${description}'\n        details:\n          validationError:\n            fieldViolations:\n              - field: ${stableArgumentNames[1]}\n                description: ${anotherDescription}\n              - field: ${stableArgumentNames[0]}\n                description: ${description}`;\n\n      expect(\n        transformError(\n          ambassadorHTTPError,\n          transformation,\n          stableArgumentNames,\n        ),\n      ).toMatchObject({\n        constructor: Error,\n        message: expectedMessage,\n        details: {\n          validationError: {\n            fieldViolations: [\n              {\n                field: stableArgumentNames[1],\n                description: anotherDescription,\n              },\n              { field: stableArgumentNames[0], description },\n            ],\n          },\n        },\n        metadata: { errorType: ErrorType.User, httpStatusCode: ambassadorHTTPError.httpStatus },\n      });\n    });\n\n    test('handles complex transformations with nested paths', () => {\n      const fieldPath = 'secret.value';\n\n      const ambassadorHTTPError = {\n        httpStatus: 400,\n        response: {\n          message,\n          errorCode: aString(),\n          details: {\n            validationError: {\n              fieldViolations: [{ field: fieldPath, description }],\n            },\n          },\n        },\n      };\n      const transformation = {\n        secret: {\n          name: '$[0]',\n          value: '$[1].some.arg.field',\n          description: '$[2]',\n        },\n      };\n\n      const expectedMessage = dedent`\n        message: 'INVALID_ARGUMENT: \"${argumentNames[1]}.some.arg.field\" ${description}'\n        details:\n          validationError:\n            fieldViolations:\n              - field: ${argumentNames[1]}.some.arg.field\n                description: ${description}`;\n\n      expect(\n        transformError(ambassadorHTTPError, transformation, argumentNames),\n      ).toMatchObject({\n        constructor: Error,\n        message: expectedMessage,\n        details: {\n          validationError: {\n            fieldViolations: [\n              { field: `${argumentNames[1]}.some.arg.field`, description },\n            ],\n          },\n        },\n        metadata: { errorType: ErrorType.User, httpStatusCode: ambassadorHTTPError.httpStatus },\n      });\n    });\n\n    test('handles the #wrap custom function', () => {\n      const fieldPathPrefix = 'some.field';\n\n      const ambassadorHTTPError = {\n        httpStatus: 400,\n        response: {\n          message,\n          errorCode: aString(),\n          details: {\n            validationError: {\n              fieldViolations: [\n                { field: `${fieldPathPrefix}.someValueWrapper`, description },\n              ],\n            },\n          },\n        },\n      };\n      const transformation = set(\n        {},\n        fieldPathPrefix,\n        '#wrap($[0].something, someValueWrapper)',\n      );\n\n      const expectedMessage = dedent`\n        message: 'INVALID_ARGUMENT: \"${argumentNames[0]}.something\" ${description}'\n        details:\n          validationError:\n            fieldViolations:\n              - field: ${argumentNames[0]}.something\n                description: ${description}`;\n\n      expect(\n        transformError(ambassadorHTTPError, transformation, argumentNames),\n      ).toMatchObject({\n        constructor: Error,\n        message: expectedMessage,\n        details: {\n          validationError: {\n            fieldViolations: [\n              { field: `${argumentNames[0]}.something`, description },\n            ],\n          },\n        },\n        metadata: { errorType: ErrorType.User, httpStatusCode: ambassadorHTTPError.httpStatus },\n      });\n    });\n\n    test('handles nested spread operators', () => {\n      const ambassadorHTTPError = {\n        response: {\n          message: aString(),\n          details: {\n            validationError: {\n              fieldViolations: [\n                {\n                  field: 'plan.maxPurchasesPerBuyer',\n                  description,\n                },\n                {\n                  field: 'plan.someField',\n                  description,\n                },\n              ],\n            },\n          },\n        },\n      };\n\n      const transformation = {\n        plan: {\n          '*': '$[0]',\n          someField: '$[1]',\n        },\n      };\n\n      const expectedMessage = dedent`\n        message: 'INVALID_ARGUMENT: \"${stableArgumentNames[1]}\" ${description}, \"${stableArgumentNames[0]}.maxPurchasesPerBuyer\" ${description}'\n        details:\n          validationError:\n            fieldViolations:\n              - field: ${stableArgumentNames[1]}\n                description: ${description}\n              - field: ${stableArgumentNames[0]}.maxPurchasesPerBuyer\n                description: ${description}`;\n\n      expect(\n        transformError(\n          ambassadorHTTPError,\n          transformation,\n          stableArgumentNames,\n        ),\n      ).toMatchObject({\n        constructor: Error,\n        message: expectedMessage,\n        details: {\n          validationError: {\n            fieldViolations: [\n              { field: stableArgumentNames[1], description },\n              {\n                field: `${stableArgumentNames[0]}.maxPurchasesPerBuyer`,\n                description,\n              },\n            ],\n          },\n        },\n        metadata: { errorType: ErrorType.User },\n      });\n    });\n  });\n\n  describe('application errors', () => {\n    // According to https://bo.wix.com/wix-docs/rnd/platformization-guidelines/errors#platformization-guidelines_errors_4xx-errors\n    const aRandomApplicationErrorHttpStatusCode = () =>\n      aRandomItemFrom([400, 401, 403, 404, 408, 409, 428, 429, 499]);\n    const code = aString();\n\n    describe('when applicationError property exists', () => {\n      test('returns the application error description and code', () => {\n        const httpStatus = aRandomApplicationErrorHttpStatusCode();\n\n        const [key1, key2, value1, value2] = times(4, () => aString());\n        const data = { [key1]: value1, [key2]: value2 };\n\n        const ambassadorHTTPError = {\n          httpStatus,\n          response: {\n            message,\n            details: {\n              applicationError: {\n                description,\n                code,\n                data,\n              },\n            },\n          },\n        };\n\n        const expectedMessage = dedent`\n          message: '${message}: ${description}'\n          details:\n            applicationError:\n              description: ${description}\n              code: ${code}\n              data:\n                ${key1}: ${value1}\n                ${key2}: ${value2}`;\n\n        expect(transformError(ambassadorHTTPError)).toMatchObject({\n          constructor: Error,\n          message: expectedMessage,\n          details: {\n            applicationError: {\n              description,\n              code,\n              data,\n            },\n          },\n          metadata: { errorType: ErrorType.User, httpStatusCode: httpStatus },\n        });\n      });\n    });\n\n    describe('when applicationError is missing, http-status is a client-error status-code', () => {\n      const httpStatus = aRandomApplicationErrorHttpStatusCode();\n      const statusText = getReasonPhrase(httpStatus);\n      const expectedCode = statusText.split(' ').map(upperCase).join('_');\n\n      describe('when no message exists in the response', () => {\n        test('returns a description based on the status-code text only', () => {\n          const ambassadorHTTPError = { httpStatus };\n\n          const expectedMessage = dedent`\n            message: ${statusText}\n            details:\n              applicationError:\n                description: ${statusText}\n                code: ${expectedCode}\n                data: {}`;\n\n          expect(transformError(ambassadorHTTPError)).toMatchObject({\n            constructor: Error,\n            message: expectedMessage,\n            details: {\n              applicationError: {\n                description: statusText,\n                code: expectedCode,\n                data: {},\n              },\n            },\n            metadata: { errorType: ErrorType.User, httpStatusCode: httpStatus },\n          });\n        });\n      });\n\n      describe('when a message exists', () => {\n        test('returns the given http status and a default application error description and message', () => {\n          const ambassadorHTTPError = { httpStatus, response: { message } };\n\n          const expectedMessage = dedent`\n            message: ${message}\n            details:\n              applicationError:\n                description: ${statusText}\n                code: ${expectedCode}\n                data: {}`;\n          expect(transformError(ambassadorHTTPError)).toMatchObject({\n            constructor: Error,\n            message: expectedMessage,\n            details: {\n              applicationError: {\n                description: statusText,\n                code: expectedCode,\n                data: {},\n              },\n            },\n            metadata: { errorType: ErrorType.User, httpStatusCode: httpStatus },\n          });\n        });\n      });\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}