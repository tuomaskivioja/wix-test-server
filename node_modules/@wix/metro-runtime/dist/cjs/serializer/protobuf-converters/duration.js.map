{"version":3,"names":["_domain","require","duration","exports","types","ConverterType","TO_JSON","transform","seconds","nanos","nanosPortion","toString","padStart","FROM_JSON","val","substring","length","split","nanosForString","res","undefined","precision","parseInt","Math","pow"],"sources":["../../../../src/serializer/protobuf-converters/duration.ts"],"sourcesContent":["import { ConverterSet, ConverterType } from '../domain';\nimport { GoogleProtoDuration } from './types';\n\nexport const duration: ConverterSet = {\n  types: ['google.protobuf.Duration'],\n\n  [ConverterType.TO_JSON]: {\n    transform: ({ seconds = '0', nanos = 0 }: GoogleProtoDuration) => {\n      let nanosPortion = '';\n\n      if (nanos !== 0) {\n        nanosPortion = `.${nanos.toString().padStart(9, '0')}`;\n      }\n\n      return `${seconds}${nanosPortion}s`;\n    },\n  },\n\n  [ConverterType.FROM_JSON]: {\n    transform: (val: string): GoogleProtoDuration => {\n      const [seconds, nanos] = val.substring(0, val.length - 1).split('.');\n\n      return {\n        seconds,\n        nanos: nanosForString(nanos),\n      };\n    },\n  },\n};\n\nfunction nanosForString(nanos: string) {\n  let res = 0;\n\n  if (nanos !== undefined) {\n    const precision = 3 - nanos.length / 3;\n    res = parseInt(nanos, 10) * Math.pow(1000, precision);\n  }\n\n  return res;\n}\n"],"mappings":";;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAGO,MAAMC,QAAsB,GAAAC,OAAA,CAAAD,QAAA,GAAG;EACpCE,KAAK,EAAE,CAAC,0BAA0B,CAAC;EAEnC,CAACC,qBAAa,CAACC,OAAO,GAAG;IACvBC,SAAS,EAAEA,CAAC;MAAEC,OAAO,GAAG,GAAG;MAAEC,KAAK,GAAG;IAAuB,CAAC,KAAK;MAChE,IAAIC,YAAY,GAAG,EAAE;MAErB,IAAID,KAAK,KAAK,CAAC,EAAE;QACfC,YAAY,GAAG,IAAID,KAAK,CAACE,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;MACxD;MAEA,OAAO,GAAGJ,OAAO,GAAGE,YAAY,GAAG;IACrC;EACF,CAAC;EAED,CAACL,qBAAa,CAACQ,SAAS,GAAG;IACzBN,SAAS,EAAGO,GAAW,IAA0B;MAC/C,MAAM,CAACN,OAAO,EAAEC,KAAK,CAAC,GAAGK,GAAG,CAACC,SAAS,CAAC,CAAC,EAAED,GAAG,CAACE,MAAM,GAAG,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC;MAEpE,OAAO;QACLT,OAAO;QACPC,KAAK,EAAES,cAAc,CAACT,KAAK;MAC7B,CAAC;IACH;EACF;AACF,CAAC;AAED,SAASS,cAAcA,CAACT,KAAa,EAAE;EACrC,IAAIU,GAAG,GAAG,CAAC;EAEX,IAAIV,KAAK,KAAKW,SAAS,EAAE;IACvB,MAAMC,SAAS,GAAG,CAAC,GAAGZ,KAAK,CAACO,MAAM,GAAG,CAAC;IACtCG,GAAG,GAAGG,QAAQ,CAACb,KAAK,EAAE,EAAE,CAAC,GAAGc,IAAI,CAACC,GAAG,CAAC,IAAI,EAAEH,SAAS,CAAC;EACvD;EAEA,OAAOF,GAAG;AACZ","ignoreList":[]}