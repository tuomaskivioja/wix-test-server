{"version":3,"names":["_domain","require","KNOWN_PROTOCOLS","pageUrl","exports","types","ConverterType","FROM_JSON","transform","val","some","protocol","_val$base","base","startsWith","path","TO_JSON","host","pathname","URL"],"sources":["../../../../src/serializer/velo-converters/page-url.ts"],"sourcesContent":["import type com from '../../proto';\nimport { ConverterSet, ConverterType } from '../domain';\n\nconst KNOWN_PROTOCOLS = ['http://', 'https://'];\n\nexport const pageUrl: ConverterSet = {\n  types: ['wix.common.PageUrl'],\n\n  [ConverterType.FROM_JSON]: {\n    transform: (val: com.wix.common.PageUrl) => {\n      if (!val) {\n        return;\n      }\n\n      if (KNOWN_PROTOCOLS.some((protocol) => val.base?.startsWith(protocol))) {\n        return `${val.base}${val.path}`;\n      }\n\n      return `http://${val.base}${val.path}`;\n    },\n  },\n\n  [ConverterType.TO_JSON]: {\n    transform: (val: string): com.wix.common.PageUrl | undefined => {\n      if (!val) {\n        return;\n      }\n\n      const { host, pathname } = new URL(val);\n\n      return {\n        base: host, // (e.g mysite.wixsite.com/mysite)\n        path: pathname, // (e.g /product-page/a-product)\n      };\n    },\n  },\n};\n"],"mappings":";;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AAEA,MAAMC,eAAe,GAAG,CAAC,SAAS,EAAE,UAAU,CAAC;AAExC,MAAMC,OAAqB,GAAAC,OAAA,CAAAD,OAAA,GAAG;EACnCE,KAAK,EAAE,CAAC,oBAAoB,CAAC;EAE7B,CAACC,qBAAa,CAACC,SAAS,GAAG;IACzBC,SAAS,EAAGC,GAA2B,IAAK;MAC1C,IAAI,CAACA,GAAG,EAAE;QACR;MACF;MAEA,IAAIP,eAAe,CAACQ,IAAI,CAAEC,QAAQ;QAAA,IAAAC,SAAA;QAAA,QAAAA,SAAA,GAAKH,GAAG,CAACI,IAAI,qBAARD,SAAA,CAAUE,UAAU,CAACH,QAAQ,CAAC;MAAA,EAAC,EAAE;QACtE,OAAO,GAAGF,GAAG,CAACI,IAAI,GAAGJ,GAAG,CAACM,IAAI,EAAE;MACjC;MAEA,OAAO,UAAUN,GAAG,CAACI,IAAI,GAAGJ,GAAG,CAACM,IAAI,EAAE;IACxC;EACF,CAAC;EAED,CAACT,qBAAa,CAACU,OAAO,GAAG;IACvBR,SAAS,EAAGC,GAAW,IAAyC;MAC9D,IAAI,CAACA,GAAG,EAAE;QACR;MACF;MAEA,MAAM;QAAEQ,IAAI;QAAEC;MAAS,CAAC,GAAG,IAAIC,GAAG,CAACV,GAAG,CAAC;MAEvC,OAAO;QACLI,IAAI,EAAEI,IAAI;QAAE;QACZF,IAAI,EAAEG,QAAQ,CAAE;MAClB,CAAC;IACH;EACF;AACF,CAAC","ignoreList":[]}