"use strict";

exports.__esModule = true;
exports.pageUrl = void 0;
var _domain = require("../domain");
const KNOWN_PROTOCOLS = ['http://', 'https://'];
const pageUrl = exports.pageUrl = {
  types: ['wix.common.PageUrl'],
  [_domain.ConverterType.FROM_JSON]: {
    transform: val => {
      if (!val) {
        return;
      }
      if (KNOWN_PROTOCOLS.some(protocol => {
        var _val$base;
        return (_val$base = val.base) == null ? void 0 : _val$base.startsWith(protocol);
      })) {
        return `${val.base}${val.path}`;
      }
      return `http://${val.base}${val.path}`;
    }
  },
  [_domain.ConverterType.TO_JSON]: {
    transform: val => {
      if (!val) {
        return;
      }
      const {
        host,
        pathname
      } = new URL(val);
      return {
        base: host,
        // (e.g mysite.wixsite.com/mysite)
        path: pathname // (e.g /product-page/a-product)
      };
    }
  }
};
//# sourceMappingURL=page-url.js.map