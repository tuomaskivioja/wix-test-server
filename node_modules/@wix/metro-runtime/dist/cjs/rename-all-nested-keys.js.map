{"version":3,"names":["renameAllNestedKeys","payload","renameMap","ignorePaths","isIgnored","path","includes","traverse","obj","Array","isArray","forEach","item","objAsRecord","Object","keys","key","newPath"],"sources":["../../src/rename-all-nested-keys.ts"],"sourcesContent":["/**\n * Recursively rename nested keys provided in `renameMap` in the given object.\n * Providing a list of paths to ignore will prevent renaming of keys in nested objects.\n *\n * Paths are provided in the format of 'path.to.nested.field'\n *\n * @param payload The object to rename keys for\n * @param renameMap A map of keys to rename, where the key is the original key and the value is the new key\n * @param ignorePaths Paths of nested fields to ignore while traversing the object\n * @returns The object with renamed keys\n */\nexport function renameAllNestedKeys(\n  payload: Record<string, unknown> | null | undefined,\n  renameMap: Record<string, string>,\n  ignorePaths: string[],\n) {\n  const isIgnored = (path: string) => ignorePaths.includes(path);\n\n  const traverse = (obj: unknown, path: string) => {\n    if (Array.isArray(obj)) {\n      obj.forEach((item) => {\n        traverse(item, path);\n      });\n    } else if (typeof obj === 'object' && obj !== null) {\n      const objAsRecord = obj as Record<string, unknown>;\n      Object.keys(objAsRecord).forEach((key) => {\n        const newPath = path === '' ? key : `${path}.${key}`;\n        if (isIgnored(newPath)) {\n          return;\n        }\n        if (key in renameMap) {\n          objAsRecord[renameMap[key]] = objAsRecord[key];\n          // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n          delete objAsRecord[key];\n        }\n        traverse(objAsRecord[key], newPath);\n      });\n    }\n  };\n\n  traverse(payload, '');\n  return payload;\n}\n"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,mBAAmBA,CACjCC,OAAmD,EACnDC,SAAiC,EACjCC,WAAqB,EACrB;EACA,MAAMC,SAAS,GAAIC,IAAY,IAAKF,WAAW,CAACG,QAAQ,CAACD,IAAI,CAAC;EAE9D,MAAME,QAAQ,GAAGA,CAACC,GAAY,EAAEH,IAAY,KAAK;IAC/C,IAAII,KAAK,CAACC,OAAO,CAACF,GAAG,CAAC,EAAE;MACtBA,GAAG,CAACG,OAAO,CAAEC,IAAI,IAAK;QACpBL,QAAQ,CAACK,IAAI,EAAEP,IAAI,CAAC;MACtB,CAAC,CAAC;IACJ,CAAC,MAAM,IAAI,OAAOG,GAAG,KAAK,QAAQ,IAAIA,GAAG,KAAK,IAAI,EAAE;MAClD,MAAMK,WAAW,GAAGL,GAA8B;MAClDM,MAAM,CAACC,IAAI,CAACF,WAAW,CAAC,CAACF,OAAO,CAAEK,GAAG,IAAK;QACxC,MAAMC,OAAO,GAAGZ,IAAI,KAAK,EAAE,GAAGW,GAAG,GAAG,GAAGX,IAAI,IAAIW,GAAG,EAAE;QACpD,IAAIZ,SAAS,CAACa,OAAO,CAAC,EAAE;UACtB;QACF;QACA,IAAID,GAAG,IAAId,SAAS,EAAE;UACpBW,WAAW,CAACX,SAAS,CAACc,GAAG,CAAC,CAAC,GAAGH,WAAW,CAACG,GAAG,CAAC;UAC9C;UACA,OAAOH,WAAW,CAACG,GAAG,CAAC;QACzB;QACAT,QAAQ,CAACM,WAAW,CAACG,GAAG,CAAC,EAAEC,OAAO,CAAC;MACrC,CAAC,CAAC;IACJ;EACF,CAAC;EAEDV,QAAQ,CAACN,OAAO,EAAE,EAAE,CAAC;EACrB,OAAOA,OAAO;AAChB","ignoreList":[]}