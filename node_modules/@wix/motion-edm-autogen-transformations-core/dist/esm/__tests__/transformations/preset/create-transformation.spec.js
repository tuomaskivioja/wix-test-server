import { aString } from '@wix/motion-runtime-test-context';
import { times } from 'lodash';
import { preset } from '../../..';
const { create: { buildRequestTransformation, buildResponseTransformation }, } = preset;
describe('create-method transformations', () => {
    describe('buildRequestTransformation', () => {
        test('creates a transformation that maps the first argument into requestMessageEntityPath', () => {
            const requestMessageEntityPath = aString();
            const tranformationObject = buildRequestTransformation({
                requestMessageEntityPath,
            });
            expect(tranformationObject).toStrictEqual({
                [requestMessageEntityPath]: '$[0]',
            });
        });
        test('supports nested paths', () => {
            // @ts-expect-error
            const entityPathSegments = times(2, aString);
            const requestMessageEntityPath = entityPathSegments.join('.');
            const tranformationObject = buildRequestTransformation({
                requestMessageEntityPath,
            });
            expect(tranformationObject).toStrictEqual({
                [entityPathSegments[0]]: { [entityPathSegments[1]]: '$[0]' },
            });
        });
    });
    describe('buildResponseTransformation', () => {
        test('unwraps the value of the provided property-path', () => {
            const responseMessageResultPath = aString();
            const tranformationString = buildResponseTransformation({
                responseMessageResultPath,
            });
            expect(tranformationString).toStrictEqual(`$.${responseMessageResultPath}`);
        });
    });
});
//# sourceMappingURL=create-transformation.spec.js.map